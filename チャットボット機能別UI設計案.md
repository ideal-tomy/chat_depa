
# チャットボット機能別UI設計案

## 1. はじめに

現在、当サービスでは画像アップロードが可能なチャットボットや、シンプルなテキスト返信のみのチャットボットなど、多様な機能を持つボットの展開を予定しています。
ユーザーがそれぞれのボットの機能を事前に把握し、目的のボットをストレスなく見つけられるようにするため、UIの改善案を提案します。

## 2. 目的

- **機能の可視化**: ユーザーが各ボットの持つ機能（例: 画像アップロード、ファイル送信、音声入力など）を一目で理解できるようにする。
- **検索性の向上**: ユーザーが求める機能を持つボットを簡単に見つけられるようにする。
- **期待値の調整**: ボットを使い始める前に、ユーザーができることを正確に伝え、ミスマッチを防ぐ。

## 3. 具体的なUI改善案

### 3.1. ボットカード（一覧表示）の改善

ボットが一覧で表示されるページ（トップページやカテゴリページなど）で、各ボットの機能を直感的に伝えます。

#### a. 機能アイコンの追加

各ボットカードの隅やタイトルの横に、対応している機能を示す小さなアイコンを配置します。

- **例:**
  - 📎 (クリップ): ファイルアップロード可能
  - 🖼️ (画像): 画像アップロード可能
  - 🎤 (マイク): 音声入力可能
  - 💬 (吹き出し): シンプルなテキストチャット

これにより、ユーザーは文字を読まなくても、視覚的に素早く機能を把握できます。

#### b. 機能タグの表示

カードの下部や説明文の近くに、機能を示すタグを表示します。

- **例:**
  - `[画像対応]` `[ファイル送信]` `[初心者向け]` `[多機能]`

タグは、アイコンよりも具体的な情報を提供し、ボットの特性を補足説明する役割を果たします。

---

### 3.2. ボット一覧ページの機能強化

#### a. 機能による絞り込みフィルター

ボット一覧ページの上部や横に、機能でボットを絞り込むためのフィルターを設置します。

- **フィルターの項目例:**
  - [ ] 画像をアップロードしたい
  - [ ] ファイルを送りたい
  - [ ] 音声で入力したい
  - [ ] シンプルな会話がしたい

ユーザーはチェックボックスなどで希望の機能を選択し、条件に合うボットだけを一覧に表示させることができます。

---

### 3.3. ボット詳細ページの改善

#### a. 「このボットでできること」セクションの追加

各ボットの詳細ページに、そのボットが持つ機能の一覧を分かりやすく説明するセクションを設けます。

- **例:**
  **このボットでできること**
  - ✅ テキストでの会話
  - ✅ 画像のアップロードと認識
  - ❌ ファイルの送信
  - ❌ 音声での会話

アイコンとテキストを組み合わせることで、技術的な詳細に踏み込まずとも、ユーザーに分かりやすく機能の範囲を伝えることができます。

## 4. 実装の進め方（案）

1.  **データ構造の定義**:
    - 各ボットのデータに、機能を示すフラグを追加します。（例: `canUploadImage: true`, `canSendFile: false`）
2.  **UIコンポーネントの実装**:
    - `BotCard.tsx` を修正し、上記のデータに基づいて機能アイコンやタグを表示するロジックを追加します。
    - 絞り込みフィルターのUIコンポーネントを新規に作成します。
3.  **フィルタリングロジックの実装**:
    - ボット一覧を表示するページ (`/bots/page.tsx` など) で、フィルターの状態に応じて表示するボットを動的に変更するロジックを実装します。
4.  **詳細ページへの反映**:
    - ボット詳細ページ (`/bots/[id]/page.tsx`) に、「このボットでできること」セクションを追加します。

## 5. まとめ

本提案により、ユーザーは多様なチャットボットの中から自分のニーズに合ったものを簡単に見つけられるようになり、サービス全体の利便性が向上します。まずはボットカードへのアイコン追加から着手し、段階的にフィルター機能などを実装していくことを推奨します。

---

## 6. 実装タスクチェックリスト

以下は、本設計案を実装するための具体的なタスクリストです。上から順に進めてください。

### Phase 1: バックエンドと型定義の準備

- [ ] **Supabase `bots` テーブルの更新**
  - [ ] `supabase設定.md` の定義に基づき、Supabaseの管理画面 (Database > Tables > bots) で以下のカラムを追加する。
    - `can_upload_image` (Type: `bool`, Default: `false`)
    - `can_send_file` (Type: `bool`, Default: `false`)

- [ ] **型定義の更新**
  - [ ] `src/types/types.ts` を開き、`Bot` 型 (または関連するボットの型) に以下のプロパティを追加する。
    ```typescript
    export type Bot = {
      // ...既存のプロパティ
      can_upload_image: boolean;
      can_send_file: boolean;
    };
    ```

### Phase 2: ボットカードUIの改善 (機能アイコン)

- [ ] **`BotCard.tsx` コンポーネントの修正**
  - [ ] `src/components/ui/BotCard.tsx` を開く。
  - [ ] コンポーネントが受け取る `bot` オブジェクトの型に、Phase 1で追加したプロパティが含まれていることを確認する。
  - [ ] カードの右上隅やタイトルの横など、適切な位置にアイコンを表示するエリアを設ける。
  - [ ] `bot.can_upload_image` が `true` の場合に 🖼️ アイコンを、`bot.can_send_file` が `true` の場合に 📎 アイコンを表示する条件付きレンダリングを追加する。

### Phase 3: ボット一覧ページの機能強化 (絞り込みフィルター)

- [ ] **フィルターUIコンポーネントの新規作成**
  - [ ] `src/components/bots/BotFilter.tsx` (または類似のパス) に、新しいコンポーネントを作成する。
  - [ ] 「画像アップロード」「ファイル送信」などのチェックボックスを持つフォームを作成する。
  - [ ] チェックボックスの状態が変更されたときに、親コンポーネントに関数を呼び出させる仕組み（コールバック）を実装する。

- [ ] **ボット一覧ページへのフィルター適用**
  - [ ] `src/app/bots/page.tsx` を開く。
  - [ ] `useState` を使用して、フィルターの状態（例: `{ showImageUpload: false, showFileUpload: false }`）を管理する変数を定義する。
  - [ ] Supabaseから取得したボットの全リストを保持する `state` と、フィルター後の表示用リストを保持する `state` を用意する。
  - [ ] 作成した `BotFilter.tsx` コンポーネントをページに配置し、フィルターの状態を更新する関数を渡す。
  - [ ] `useEffect` を使用し、フィルターの状態が変更されるたびに、全リストから条件に合うボットを絞り込み、表示用リストを更新するロジックを実装する。

### Phase 4: ボット詳細ページの改善

- [ ] **詳細ページへの「できること」リスト追加**
  - [ ] `src/app/bots/[id]/page.tsx` を開く。
  - [ ] ボットの詳細情報を取得する処理に、新しい機能フラグ (`can_upload_image` など) が含まれていることを確認する。
  - [ ] ページ内の適切な場所（説明文の下など）に、「このボットでできること」という見出しのセクションを追加する。
  - [ ] `bot.can_upload_image` の値に応じて、「✅ 画像のアップロード」「❌ 画像のアップロード」のように、機能の可否をアイコン付きでリスト表示する。

### Phase 5: データ登録と最終確認

- [ ] **テストデータの登録**
  - [ ] Supabaseの管理画面で、いくつかのボットデータに対し `can_upload_image` や `can_send_file` の値を `true` に設定する。

- [ ] **動作確認**
  - [ ] アプリケーションを起動 (`npm run dev`) し、以下の点を確認する。
    - [ ] ボット一覧で、`true` に設定したボットのカードにアイコンが表示されているか。
    - [ ] 絞り込みフィルターのチェックボックスをオン/オフにし、表示されるボットが正しく変わるか。
    - [ ] 各ボットの詳細ページで、「できること」リストが正しく表示されているか。
